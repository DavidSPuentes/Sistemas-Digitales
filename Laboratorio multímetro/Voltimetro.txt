#include "mbed.h"

UnbufferedSerial Con(PA_2, PA_3); 
AnalogIn Ena(PA_4); 

float Vol; 
float Au; 
int Val = 0, Dec = 0; 


int main() 
{
    while (1) 
    {
       
        Vol = Ena.read() * 3.29 ; 
        Au = Vol * 100; 
        Val = (int)Au / 100; 
        Dec = (int)Au % 100; 

        char St[100];
        //***********\n\r se utiliza para hacer un salto de linea (que se vea bonito)
      
        int Lon = sprintf(St, "\n\r El valor del voltaje es %i.%02i V", Val, Dec);
        
        for (int i = 0; i < Lon; i++)
        {
            while (!Con.writeable()); 
            Con.write(&St[i], 1); 
        }
        
        ThisThread::sleep_for(1s); // para el flujo del programa****se usa ThisThread:: por que habla del hilo actual en este caso para la funcion main 
    }
}